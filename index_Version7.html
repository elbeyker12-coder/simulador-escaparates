<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Escaparates</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f9fa; color: #222; margin: 0; padding: 0; }
    header, footer { background: #1e88e5; color: #fff; text-align: center; padding: 1em 0; }
    main { display: flex; flex-wrap: wrap; justify-content: space-around; margin: 2em 0; }
    section { margin: 1em; padding: 1em; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
    #toolbox { flex: 1 1 180px; min-width: 180px; }
    #canvas-section { flex: 2 1 400px; min-width: 320px; }
    #canvas { position: relative; width: 400px; height: 300px; border: 2px dashed #1e88e5; background: #e3f2fd; margin: 1em 0; overflow: hidden; }
    .tool { font-size: 1em; margin: 0.2em; padding: 0.5em 1em; border: none; background: #90caf9; color: #222; border-radius: 4px; cursor: pointer; transition: background 0.2s; }
    .tool:hover { background: #1e88e5; color: #fff; }
    .element {
      position: absolute;
      background: #fffde7;
      border: 1px solid #fbc02d;
      border-radius: 8px;
      cursor: move;
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0.2em 0.5em;
      min-width: 60px;
      min-height: 60px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .element img {
      width: 40px;
      height: 40px;
      margin-bottom: 0.2em;
    }
    .element span {
      font-size: 0.95em;
    }
    #generate-plan { margin-top: 1em; background: #43a047; color: #fff; border: none; padding: 0.6em 1.2em; border-radius: 4px; cursor: pointer; }
    #generate-plan:hover { background: #388e3c; }
    pre { background: #ececec; padding: 1em; border-radius: 6px; font-size: 1em; }
    @media (max-width: 700px) {
      main { flex-direction: column; align-items: stretch; }
      #canvas { width: 98vw; height: 260px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Simulador de Diseño de Escaparates</h1>
    <p>Crea, organiza y visualiza escaparates virtuales con elementos reales.</p>
  </header>
  <main>
    <section id="toolbox">
      <h2>Caja de Herramientas</h2>
      <button class="tool" data-type="maniqui">Maniquí</button>
      <button class="tool" data-type="mesa">Mesa</button>
      <button class="tool" data-type="soporte">Soporte</button>
      <button class="tool" data-type="planta">Planta</button>
      <button class="tool" data-type="luz">Luz</button>
    </section>
    <section id="canvas-section">
      <h2>Escaparate</h2>
      <div id="canvas"></div>
      <button id="generate-plan">Generar Plano de Escaparate</button>
    </section>
    <section id="output-section">
      <h2>Plano generado</h2>
      <pre id="output"></pre>
    </section>
  </main>
  <footer>
    <p>Por Doc. Beyker Salvatierra - Simulador de Escaparates</p>
  </footer>
  <script>
    // URLs de imágenes libres o de íconos
    const images = {
      maniqui: "https://cdn-icons-png.flaticon.com/512/482/482687.png",
      mesa: "https://cdn-icons-png.flaticon.com/512/3143/3143643.png",
      soporte: "https://cdn-icons-png.flaticon.com/512/711/711284.png",
      planta: "https://cdn-icons-png.flaticon.com/512/616/616494.png",
      luz: "https://cdn-icons-png.flaticon.com/512/414/414974.png"
    };

    const names = {
      maniqui: "Maniquí",
      mesa: "Mesa",
      soporte: "Soporte",
      planta: "Planta",
      luz: "Luz"
    };

    const toolbox = document.getElementById('toolbox');
    const canvas = document.getElementById('canvas');
    const output = document.getElementById('output');
    const generatePlanBtn = document.getElementById('generate-plan');
    let elementId = 0;

    toolbox.addEventListener('click', (e) => {
      if (e.target.classList.contains('tool')) {
        const type = e.target.dataset.type;
        addElement(type);
      }
    });

    function addElement(type) {
      const el = document.createElement('div');
      el.className = 'element';
      el.dataset.type = type;
      el.dataset.id = ++elementId;
      el.style.left = Math.random() * (canvas.clientWidth - 80) + 'px';
      el.style.top = Math.random() * (canvas.clientHeight - 80) + 'px';

      // Imagen
      const img = document.createElement('img');
      img.src = images[type];
      img.alt = names[type];
      el.appendChild(img);

      // Texto
      const span = document.createElement('span');
      span.textContent = names[type];
      el.appendChild(span);

      enableDrag(el);
      canvas.appendChild(el);
    }

    // Drag & Drop básico para PC y móvil
    function enableDrag(el) {
      let offsetX, offsetY, isDragging = false;
      el.addEventListener('mousedown', startDrag);
      el.addEventListener('touchstart', startDragTouch);

      function startDrag(e) {
        isDragging = true;
        offsetX = e.offsetX;
        offsetY = e.offsetY;
        el.style.zIndex = 10;
        document.addEventListener('mousemove', moveDrag);
        document.addEventListener('mouseup', stopDrag);
      }
      function moveDrag(e) {
        if (isDragging) {
          const rect = canvas.getBoundingClientRect();
          let x = e.clientX - rect.left - offsetX;
          let y = e.clientY - rect.top - offsetY;
          x = Math.min(Math.max(x, 0), canvas.clientWidth - el.offsetWidth);
          y = Math.min(Math.max(y, 0), canvas.clientHeight - el.offsetHeight);
          el.style.left = x + 'px';
          el.style.top = y + 'px';
        }
      }
      function stopDrag() {
        isDragging = false;
        el.style.zIndex = 1;
        document.removeEventListener('mousemove', moveDrag);
        document.removeEventListener('mouseup', stopDrag);
      }
      function startDragTouch(e) {
        isDragging = true;
        const touch = e.touches[0];
        const rect = el.getBoundingClientRect();
        offsetX = touch.clientX - rect.left;
        offsetY = touch.clientY - rect.top;
        el.style.zIndex = 10;
        document.addEventListener('touchmove', moveDragTouch, {passive:false});
        document.addEventListener('touchend', stopDragTouch);
      }
      function moveDragTouch(e) {
        if (isDragging) {
          const touch = e.touches[0];
          const rect = canvas.getBoundingClientRect();
          let x = touch.clientX - rect.left - offsetX;
          let y = touch.clientY - rect.top - offsetY;
          x = Math.min(Math.max(x, 0), canvas.clientWidth - el.offsetWidth);
          y = Math.min(Math.max(y, 0), canvas.clientHeight - el.offsetHeight);
          el.style.left = x + 'px';
          el.style.top = y + 'px';
        }
      }
      function stopDragTouch() {
        isDragging = false;
        el.style.zIndex = 1;
        document.removeEventListener('touchmove', moveDragTouch);
        document.removeEventListener('touchend', stopDragTouch);
      }
    }

    // Plano generado
    generatePlanBtn.addEventListener('click', () => {
      const elements = canvas.querySelectorAll('.element');
      let plan = 'Plano de Escaparate:\n\n';
      elements.forEach(el => {
        plan += `- ${el.querySelector('span').textContent}: posición (${el.style.left}, ${el.style.top})\n`;
      });
      output.textContent = plan;
    });
  </script>
</body>
</html>
